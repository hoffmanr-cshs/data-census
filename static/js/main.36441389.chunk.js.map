{"version":3,"sources":["ResourceSelector.js","ElementList.js","ElementPanel.js","ElementMetrics.js","CodingTreeMap.js","DateHeatMap.js","DatePrecision.js","ReferenceTargets.js","ElementDetailPanel.js","DropZone.js","FileLoader.js","bulb.svg","App.js","index.js"],"names":["ResourceSelector","data","currentResourceCategory","onSelect","useState","categories","setCategories","useEffect","resourceData","_","chain","filter","item","elementPath","resourceType","sortBy","value","buildResourceTitle","stratification","handleResourceSelect","e","preventDefault","currentTarget","id","Dropdown","Toggle","variant","className","cat","find","c","getCurrentResourceTitle","Menu","popperConfig","strategy","map","i","num","title","Item","active","href","onClick","Badge","pill","count","toString","replace","ElementList","props","handleClick","style","borderBottom","el","level","prevLevel","nextLevel","pct","parentCount","parentTitle","selectedElement","Math","round","width","range","classes","push","join","display","fhirType","ElementPanel","elementsList","onCurrentElementChange","onCurrentResourceCategoryChange","currentElementPath","setCurrentElementPath","filteredElements","setFilteredElements","handleElementSelect","category","length","ElementMetrics","element","detailData","instanceMetrics","setInstanceMetrics","instanceCounts","d","detailType","items","parseInt","detailStratification","split","metrics","medianValue","minValue","minBy","maxValue","maxBy","totalCount","sumBy","medianCount","forEach","undefined","max","min","median","instanceCountToRange","addCommas","Row","Col","color","fontWeight","backgroundColor","instanceCount","fontSize","CodingTreeMap","updateTextFilter","debounce","setState","appliedTextFilter","state","filterText","bind","resetData","prevProps","prevState","this","subsetFilter","filterByCount","filterByText","displayData","countType","node","text","reduce","result","flatData","groupableData","system","code","finalTree","children","systems","uniqBy","each","subsetSize","uncommon","orderBy","slice","toUpperCase","indexOf","target","Form","Check","inline","checked","onChange","handleSubsetChange","label","type","Control","placeholder","handleTextChange","height","dataToTree","valueFormat","orientLabel","margin","top","right","bottom","left","colors","scheme","theme","labels","labelTextColor","parentLabelTextColor","labelSkipSize","nodeOpacity","tooltip","buildTooltip","React","Component","getYear","dateString","year","getYearBounds","years","DateHeatMap","monthNames","chartYearRange","setChartYearRange","summaryView","setSummaryView","showSummaryView","renderHeader","legend","showLink","link","summaryData","keys","indexBy","axisTop","axisLeft","tickSize","tickPadding","fillOpacity","cell","yKey","renderSummaryView","yearBounds","yearsPerGroup","chunk","yearGroup","first","last","acc","targetYear","sum","buildYearGroups","hasSummaryView","cellBorderColor","from","modifiers","hoverTarget","animate","renderDetailView","rawYear","rawMonth","month","values","assign","n","DatePrecision","counts","setCounts","precisions","newCounts","precision","day","time","timezone","makePct","v","ReferenceTargets","setTotalCount","r","ElementDetailPanel","currentElement","elementDetailData","setElementDetailData","hasCodingDetail","hasDateDetail","hasReferenceDetail","DropZone","fileDropHandler","dragCounter","setDragCounter","isFileDrag","dataTransfer","types","overlay","border","position","zIndex","onDragEnter","stopPropagation","onDragOver","onDragLeave","onDrop","files","FileLoader","loading","setLoading","errorMessage","setErrorMessage","fileInput","useRef","onFileLoaded","dataUrl","name","results","RegExp","exec","window","location","search","decodeURIComponent","getUrlParameter","fetch","then","response","ok","Error","status","statusText","JSON","parse","readData","elements","detail","catch","message","summary","isArray","version","url","pathParts","isExtensionUrl","match","parentPath","rawPath","parentIndex","orderedData","unshift","findIndex","splice","readFile","file","reader","FileReader","Promise","resolve","reject","onload","onerror","readAsText","Alert","Spinner","animation","role","ref","accept","Button","current","click","_extends","Object","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","SvgBulb","_ref","svgRef","titleId","xmlns","xmlnsXlink","x","y","viewBox","enableBackground","xmlSpace","ForwardRef","App","setElementsList","elementsDetail","setElementsDetail","setCurrentElement","setCurrentResourceCategory","background","fill","overflowY","borderLeft","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.36441389.chunk.js","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport { Dropdown, Badge } from \"react-bootstrap\";\nimport _ from \"lodash\";\n\nfunction ResourceSelector({data, currentResourceCategory, onSelect}) {\n\n\tconst [categories, setCategories] = useState([]);\n\n\tuseEffect( () => {\n\t\tconst resourceData = _.chain(data)\n\t\t\t.filter( item => {\n\t\t\t\treturn item.elementPath === item.resourceType;\n\t\t\t})\n\t\t\t.sortBy([\"resourceType\", \"stratification\"])\n\t\t\t.value();\n\t\tsetCategories(resourceData);\n\t}, [data])\n\n\tconst addCommas = num => {\n\t\treturn num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\t}\n\n\tconst buildResourceTitle = (resourceType, stratification) => {\n\t\treturn resourceType + (stratification !== \"unstratified\" ? \" (\" + stratification + \")\" : \"\"); \n\t}\n\n\tconst handleResourceSelect = e => {\n\t\te.preventDefault();\n\t\tif (onSelect)\n\t\t\tonSelect(categories[e.currentTarget.id]);\n\t}\n\n\tconst renderDropDownCategory = (item, i) => {\n\t\tconst title = buildResourceTitle(item.resourceType, item.stratification);\n\t\treturn <Dropdown.Item \n\t\t\tactive={currentResourceCategory && \n\t\t\t\titem.resourceType === currentResourceCategory.resourceType && \n\t\t\t\titem.stratification === currentResourceCategory.stratification\n\t\t\t}\n\t\t\thref=\"#\" key={title} \n\t\t\tclassName=\"d-flex\" id={i} \n\t\t\tonClick={handleResourceSelect}>\n\t\t\t<div>{title}</div>\n\t\t\t<div className=\"ml-auto pl-4\"><Badge variant=\"light\" pill>{addCommas(item.count)}</Badge></div>\n\t\t</Dropdown.Item>\n\t}\n\n\tconst getCurrentResourceTitle = () => {\n\t\tif (!currentResourceCategory || !categories) return;\n\t\tconst cat = categories.find( c => {\n\t\t\treturn c.stratification === currentResourceCategory.stratification && \n\t\t\t\tc.resourceType === currentResourceCategory.resourceType\n\t\t});\n\t\treturn buildResourceTitle(cat.resourceType, cat.stratification);\n\t}\n\n\treturn <div>\n\t\t<Dropdown>\n\t\t\t<Dropdown.Toggle variant=\"outline-primary\" className=\"\">\n\t\t\t\t{getCurrentResourceTitle() || \"Select Resource\"}\n\t\t\t</Dropdown.Toggle>\n\t\t\t<Dropdown.Menu popperConfig={{strategy: \"fixed\"}}>\n\t\t\t\t{ categories.map(renderDropDownCategory) }\n\t\t\t</Dropdown.Menu>\n\t\t</Dropdown>\n\t</div>\n\n\n}\n\nexport default ResourceSelector;","import React from \"react\";\nimport _ from \"lodash\";\n\nfunction ElementList({data, ...props}) {\n\n\tconst handleClick = e => {\n\t\tif (props.onSelect) props.onSelect(e.currentTarget.id)\n\t\te.preventDefault();\n\t}\n\n\tconst renderElement = (el, i) => {\n\t\tif (el.level === -1) return;\n\n\t\tconst prevLevel = (data[i-1] && data[i-1].level);\n\t\tconst nextLevel = (data[i+1] && data[i+1].level);\n\t\t\n\t\tconst pct = (el.count/el.parentCount||0)*100;\n\t\tconst parentTitle = (el.level === 0) ? \"resource\" : \"parent\";\n\t\treturn <tr key={el.elementPath} id={el.elementPath} \n\t\t\tclassName={el.elementPath === props.selectedElement ? \"element element-selected\" : \"element\"}\n\t\t\tonClick={handleClick}\n\t\t>\n\t\t\t<td><div title={`${Math.round(pct)}% of ${parentTitle}`} className=\"element-pct\">\n\t\t\t\t<div style={{width: Math.round(100-pct)+\"%\"}} className=\"element-pct-bar\"></div>\n\t\t\t</div></td>\n\t\t\t<td className=\"d-flex\">\n\t\t\t\t{(_.range(1, el.level+1)).map( level => {\n\t\t\t\t\tlet classes = [\"element-level\"];\n\t\t\t\t\tif (level > prevLevel) classes.push(\"element-level-first\");\n\t\t\t\t\tif (level > nextLevel) classes.push(\"element-level-last\");\n\t\t\t\t\treturn <div key={level} \n\t\t\t\t\t\tclassName={classes.join(\" \")}></div>\n\t\t\t\t})}\n\t\t\t\t<div className=\"element-name-outer\">\n\t\t\t\t\t<button className=\"element-name btn btn-link p-0\" title={el.elementPath}>{el.display}</button>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t\t<td className=\"element-type\">{el.fhirType}</td>\n\t\t</tr>\n\t}\n\n\treturn <table className=\"my-2\">\n\t\t<thead className=\"font-weight-bold\"><tr style={{borderBottom: \"1px solid grey\"}}>\n\t\t\t<td className=\"text-center py-2\">%</td><td>name</td><td>type</td>\n\t\t</tr></thead>\n\t\t<tbody>\n\t\t{data.map(renderElement)}\n\t</tbody></table>\n\n\n}\n\nexport default ElementList;","import React, { useEffect, useState } from \"react\";\nimport ResourceSelector from \"./ResourceSelector\";\nimport ElementList from './ElementList';\n\n\nfunction ElementPanel({elementsList, currentResourceCategory, onCurrentElementChange, onCurrentResourceCategoryChange}) {\n\n\tconst [currentElementPath, setCurrentElementPath] = useState();\n\tconst [filteredElements, setFilteredElements] = useState([]);\n\n\tuseEffect( () => {\n\t\tif (!elementsList || !currentResourceCategory) return;\n\t\tsetFilteredElements( elementsList.filter( el => {\n\t\t\treturn el.stratification === currentResourceCategory.stratification && \n\t\t\t\tel.resourceType === currentResourceCategory.resourceType\n\t\t}));\n\t}, [elementsList, currentResourceCategory])\n\n\tconst handleElementSelect = (elementPath) => {\n\t\tsetCurrentElementPath(elementPath);\n\t\tif (onCurrentElementChange) {\n\t\t\tonCurrentElementChange(\n\t\t\t\telementsList.find( el => {\n\t\t\t\t\treturn el.elementPath === elementPath && \n\t\t\t\t\t\tel.stratification === (currentResourceCategory && currentResourceCategory.stratification) \n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tconst handleCategoryChange = category => {\n\t\tonCurrentResourceCategoryChange(category);\n\t\thandleElementSelect(null)\n\t}\n\n\treturn <div>\n\t\t<ResourceSelector\n\t\t\tdata={elementsList}\n\t\t\tonSelect={handleCategoryChange}\n\t\t\tcurrentResourceCategory={currentResourceCategory}\n\t\t/>\n\t\t{filteredElements.length > 0 && currentResourceCategory && \n\t\t\t<ElementList \n\t\t\t\tdata={filteredElements} \n\t\t\t\tselectedElement={currentElementPath} \n\t\t\t\tonSelect={handleElementSelect}\n\t\t\t/>\n\t\t}\n\t</div>\n\t\n}\n\nexport default ElementPanel;","import React, {useEffect, useState} from \"react\";\nimport { Row, Col } from \"react-bootstrap\";\nimport _ from \"lodash\";\n\nfunction ElementMetrics({element, detailData}) {\n\n\tconst [instanceMetrics, setInstanceMetrics] = useState();\n\n\tuseEffect( () => {\n\t\tconst instanceCountToRange = instanceCounts => {\n\t\t\tconst minValue = _.minBy(instanceCounts, \"items\");\n\t\t\tconst maxValue = _.maxBy(instanceCounts, \"items\");\n\t\t\tconst totalCount = _.sumBy(instanceCounts, \"count\");\n\t\t\tlet medianValue;\n\t\t\tlet medianCount = 0;\n\t\t\tinstanceCounts.forEach( (c, i) => {\n\t\t\t\tif (medianValue !== undefined) return;\n\t\n\t\t\t\tif (medianCount+c.count > totalCount/2) {\n\t\t\t\t\tmedianValue = c.items;\n\t\t\t\t} else if (medianCount+c.count === totalCount/2) {\n\t\t\t\t\tmedianValue = (c.items + instanceCounts[i+1].items)/2\n\t\t\t\t} else {\n\t\t\t\t\tmedianCount = medianCount + c.count;\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn {\n\t\t\t\tmax: maxValue ? maxValue.items : 0,\n\t\t\t\tmin: minValue ? minValue.items : 0,\n\t\t\t\tmedian: medianValue, \n\t\t\t\tcount: totalCount\n\t\t\t};\n\t\t}\n\t\n\t\tconst instanceCounts = _.chain(detailData)\n\t\t\t.filter( d => d.detailType === \"instanceCount\" )\n\t\t\t.map( d => {\n\t\t\t\tconst items = parseInt(d.detailStratification.split(\"-\")[0]);\n\t\t\t\treturn {items, count: d.count}\n\t\t\t})\n\t\t\t.sortBy(\"items\")\n\t\t\t.value()\n\n\t\tif (instanceCounts.length) {\n\t\t\tconst metrics = instanceCountToRange(instanceCounts);\n\t\t\tsetInstanceMetrics(metrics)\n\t\t} else {\n\t\t\tsetInstanceMetrics();\n\t\t}\n\n\t}, [detailData, element]);\n\n\tconst addCommas = num => {\n\t\treturn num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\t}\n\n\tconst pct = Math.round((element.count/element.parentCount)*100);\n\n\treturn <div>\n\n\t\t<Row className=\"mb-4\">\n\t\t\t<Col>\n\t\t\t\t<div className=\"p-2 shadow-sm bg-white rounded\">\n\t\t\t\t\t<div className=\"mb-2 text-center text-secondary text-uppercase\">populated</div>\t\t\t\t\t\n\t\t\t\t\t<div className=\"d-flex justify-content-center\">\n\t\t\t\t\t\t<div className=\"mr-5\">\n\t\t\t\t\t\t\t<h2 className=\"mb-0\" style={{color: \"#059669\", fontWeight: 700}}>{pct === 0 ? \"< 1\" : pct}%</h2>\n\t\t\t\t\t\t\t<div>of parents</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h2 className=\"mb-0\" style={{color: \"#059669\", fontWeight: 700}}>\n\t\t\t\t\t\t\t\t{ addCommas(element.count) }\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<div>elements</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Col>\n\t\t\t\n\t\t\t{instanceMetrics && <Col>\n\t\t\t\t<div className=\"p-2 shadow-sm bg-white rounded\" style={{backgroundColor: \"white\"}}>\n\t\t\t\t<div className=\"mb-2 text-center text-secondary text-uppercase\">instances</div>\t\t\t\t\t\n\t\t\t\t\t<div className=\"d-flex justify-content-center\">\n\t\t\t\t\t\t<div className=\"mr-5\">\n\t\t\t\t\t\t\t<h2 className=\"mb-0\" style={{color: \"#059669\", fontWeight: 700}}>\n\t\t\t\t\t\t\t\t{ addCommas(element.instanceCount || 0) }\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<div>count</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h2 className=\"mb-0\" style={{color: \"#059669\", fontWeight: 700}}>\n\t\t\t\t\t\t\t\t<span>{ addCommas(instanceMetrics.median) }</span>\n\t\t\t\t\t\t\t\t{instanceMetrics.min !== instanceMetrics.max && \n\t\t\t\t\t\t\t\t\t<span style={{fontSize: \"50%\"}}> (range of {instanceMetrics.min}-{instanceMetrics.max})</span>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<div>median per parent</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Col>}\n\t\t</Row>\n\n\t</div>\n\t\n}\n\nexport default ElementMetrics;","import React from \"react\";\nimport { Form } from \"react-bootstrap\";\nimport { ResponsiveTreeMap } from \"@nivo/treemap\";\nimport _ from \"lodash\";\n\nclass CodingTreeMap extends React.Component {\n\t\n\tconstructor(props) {\n\t\tsuper();\n\t\tthis.updateTextFilter = _.debounce( () => {\n\t\t\tthis.setState({appliedTextFilter: this.state.filterText});\n\t\t}, 1000).bind(this);\n\t\tthis.state = this.resetData(props.detailData);\t\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (prevProps && (this.props.detailData !== prevProps.detailData))\n\t\t\tthis.setState( this.resetData(this.props.detailData) );\n\n\t\tif (prevState && (\n\t\t\tprevState.appliedTextFilter !== this.state.appliedTextFilter || prevState.subsetFilter !== this.state.subsetFilter)\n\t\t) {\n\t\t\tlet data = this.state.data; \n\t\t\tif (this.state.subsetFilter !== \"all\")\n\t\t\t\tdata = this.filterByCount(data, 25, this.state.subsetFilter === \"uncommon\");\n\t\t\tif (this.state.appliedTextFilter)\n\t\t\t\tdata = this.filterByText(data, this.state.appliedTextFilter);\n\t\t\tthis.setState({displayData: data});\n\t\t}\n\t}\n\n\tresetData(detailData) {\n\t\tconst data = detailData.filter( d => d.detailType === \"coding\");\n\t\treturn { \n\t\t\tdata,\n\t\t\tdisplayData: data,\n\t\t\tappliedTextFilter: \"\",\n\t\t\tfilterText: \"\",\n\t\t\tsubsetFilter: \"all\", countType: \"resource\"\n\t\t};\n\t}\n\n\tbuildTooltip(node) {\n\t\tconst addCommas = num => {\n\t\t\treturn num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\t\t}\n\t\tconst title = node.id.split(\"|\")[1] \n\t\t\t? node.id.split(\"|\")[1]\n\t\t\t: node.id;\n\t\tconst text = (node.data.text||\"\") !== title\n\t\t\t? (node.data.text||\"\").split(\"\\n\").reduce( (result, item) => <>{result}<br/>{item}</>)\n\t\t\t: \"\";\n\t\treturn <>\n\t\t\t{title}: <b>{addCommas(node.value)}</b>\n\t\t\t{text && <br/>}\n\t\t\t{text}\n\t\t</>\n\t}\n\n\tdataToTree(flatData) {\n\t\tconst groupableData = _.map(flatData, d => {\n\t\t\tconst id = d.detailStratification\n\t\t\tconst [system, code] = id.split(\"|\");\n\t\t\treturn {system: system || \"No System\", id, code, text: d.text, value: d.count};\n\t\t});\n\t\tlet finalTree = {id: \"Codings\", children: []};\n\t\tconst systems = _.chain(groupableData).uniqBy(\"system\").map(\"system\").value();\n\t\t_.each(systems, system => {\n\t\t\tfinalTree.children.push({\n\t\t\t\tid: system,\n\t\t\t\tchildren: groupableData.filter( d => d.system === system )\n\t\t\t})\n\t\t});\n\t\treturn finalTree;\n\t}\n\n\tfilterByCount(flatData, subsetSize, uncommon) {\n\t\treturn _.chain(flatData)\n\t\t\t.orderBy(\"count\", uncommon ? \"desc\" : \"asc\")\n\t\t\t.slice(0, subsetSize)\n\t\t\t.value();\n\t}\n\n\tfilterByText(data, text) {\n\t\tif (!text) return data;\n\t\treturn data.filter( item => {\n\t\t\treturn item.detailStratification.toUpperCase().indexOf(text.toUpperCase()) > -1 ||\n\t\t\t\t(item.text||\"\").toUpperCase().indexOf(text.toUpperCase()) > -1;\n\t\t})\n\t}\n\n\thandleTextChange(e) {\n\t\tthis.setState({filterText: e.target.value});\n\t\tthis.updateTextFilter();\n\t}\n\n\thandleSubsetChange(value) {\n\t\tthis.setState({subsetFilter: value});\n\t}\n\t\n\trender() {\n\t\tlet data = this.state.displayData;\n\t\n\t\treturn <div className=\"p-4 shadow-sm p-3 mb-5 bg-white rounded\" style={{backgroundColor: \"white\"}}>\n\n\t\t\t<div className=\"mb-4\">\n\t\t\t\t<span>Show: </span>\n\t\t\t\t<Form.Check inline\n\t\t\t\t\tchecked={this.state.subsetFilter === \"all\"}\n\t\t\t\t\tonChange={this.handleSubsetChange.bind(this, \"all\")}\n\t\t\t\t\tlabel=\"all codes\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tid=\"count-filter-all\"\n\t\t\t\t/>\n\t\t\t\t<Form.Check inline\n\t\t\t\t\tchecked={this.state.subsetFilter === \"common\"}\n\t\t\t\t\tonChange={this.handleSubsetChange.bind(this, \"common\")}\n\t\t\t\t\tlabel=\"most common codes (25)\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tid=\"count-filter-common\"\n\t\t\t\t/>\n\t\t\t\t<Form.Check inline\n\t\t\t\t\tchecked={this.state.subsetFilter === \"uncommon\"}\n\t\t\t\t\tonChange={this.handleSubsetChange.bind(this, \"uncommon\")}\n\t\t\t\t\tlabel=\"least common codes (25)\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tid=\"count-filter-uncommon\"\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<Form.Control className=\"mb-4\" placeholder=\"search...\" \n\t\t\t\tvalue={this.state.filterText||\"\"} onChange={this.handleTextChange.bind(this)}\n\t\t\t/>\n\n\t\t\t<div style={{height: \"600px\"}}>\n\t\t\t\t<ResponsiveTreeMap\n\t\t\t\t\tdata={this.dataToTree(data)}\n\t\t\t\t\tvalueFormat=\" >,\"\n\t\t\t\t\torientLabel={false}\n\t\t\t\t\tmargin={{ top: 10, right: 2, bottom: 2, left: 2 }}\n\t\t\t\t\tcolors={{scheme: \"greens\"}}\n\t\t\t\t\tlabel={ (node => node.data.code) }\n\t\t\t\t\ttheme={{\n\t\t\t\t\t\tlabels: {text: {fontSize: \"14px\", fontWeight: \"bold\"}}\n\t\t\t\t\t}}\n\t\t\t\t\tlabelTextColor=\"black\"\n\t\t\t\t\tparentLabelTextColor=\"black\"\n\t\t\t\t\tlabelSkipSize={12}\n\t\t\t\t\tnodeOpacity={0.2}\n\t\t\t\t\ttooltip={( ({node}) => <div>{this.buildTooltip(node)}</div> )}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t</div>\n\t}\n\n\n}\n\nexport default CodingTreeMap;","import React, {useEffect, useState} from \"react\";\nimport _ from \"lodash\";\nimport { ResponsiveHeatMap } from \"@nivo/heatmap\"\n\n\nfunction getYear(dateString) {\n\tconst [year] = dateString.detailStratification.split(\"-\");\n\treturn parseInt(year);\n}\n\nfunction getYearBounds(data) {\n\tconst years = data.map(getYear);\n\treturn [_.minBy(years), _.max(years)];\n}\n\nfunction buildYearGroups(data, yearBounds, yearsPerGroup) {\n\tif (!yearsPerGroup) yearsPerGroup = \n\t\t(yearBounds[1]-yearBounds[0]) >= 50 ? 10 : 5;\n\n\tconst yearGroups = _.chunk(\n\t\t_.range(yearBounds[0], yearBounds[1]+1), yearsPerGroup\n\t);\n\n\treturn yearGroups.map( yearGroup => {\n\t\tconst range = _.first(yearGroup)+\"-\"+_.last(yearGroup);\n\t\tconst count = yearGroup.reduce( (acc, targetYear) => {\n\t\t\treturn acc + _.chain(data)\n\t\t\t\t.filter( d => getYear(d) === targetYear )\n\t\t\t\t.map( d => d.count ).sum().value() || 0;\n\t\t}, 0)\n\t\treturn {range, count};\n\t})\n}\n\n\nfunction DateHeatMap({element, data, ...props}) {\n\n\tconst monthNames = props.monthNames ||\n\t\t[\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\n\tconst [chartYearRange, setChartYearRange] = useState();\n\tconst [summaryView, setSummaryView] = useState();\n\n\tuseEffect( () => {\n\t\tconst range = getYearBounds(data);\n\t\tsetChartYearRange(range);\n\t\tsetSummaryView(range[1]-range[0] > 10 ? \"show\" : \"none\")\n\t}, [data]);\n\n\n\tconst showSummaryView = e => {\n\t\tsetChartYearRange( getYearBounds(data) )\n\t\tsetSummaryView(\"show\");\n\t\te.preventDefault();\n\t}\n\n\tconst renderHeader = (legend, showLink) => {\n\t\tconst link = <span> (<button className=\"btn btn-link p-0 \" onClick={showSummaryView}>view all years</button>)</span>;\n\t\treturn <div className=\"mb-2 text-center\">\n\t\t\t<span className=\"text-secondary text-uppercase\">Date Heatmap - {legend}</span>\n\t\t\t{showLink && link}\n\t\t</div>\n\t}\t\t\n\n\tconst renderSummaryView = (summaryData) => {\n\t\treturn <div>\n\t\t\t\t{renderHeader(\"summary\")}\n\t\t\t\t<div style={{height: summaryData.length*35}}>\n\t\t\t\t<ResponsiveHeatMap\n\t\t\t\t\tdata={summaryData}\n\t\t\t\t\tkeys={[\"count\"]}\n\t\t\t\t\tindexBy=\"range\"\n\t\t\t\t\taxisTop={null}\n\t\t\t\t\taxisLeft={{tickSize: 0, tickPadding: 10}}\n\t\t\t\t\tcolors={[\"#edf8fb\",\"#ccece6\", \"#99d8c9\", \"#66c2a4\", \"#2ca25f\"]}\n\t\t\t\t\ttheme={{\n\t\t\t\t\t\tlabels: {text: {fontSize: \"14px\", fontWeight: \"bold\", fillOpacity : 1}},\n\t\t\t\t\t\tfontSize: \"14px\", fontWeight: \"bold\"\n\t\t\t\t\t}}\n\t\t\t\t\tmargin={{ left: 100, right: 20, top: 10, bottom: 10 }}\n\t\t\t\t\tonClick={ cell => {\n\t\t\t\t\t\tif (cell.value === 0) return;\n\t\t\t\t\t\tconst years = cell.yKey.split(\"-\");\n\t\t\t\t\t\tsetChartYearRange( [parseInt(years[0]), parseInt(years[1])] );\n\t\t\t\t\t\tsetSummaryView(\"hide\");\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t};\n\n\tconst renderDetailView = (detailData, hasSummaryView) => {\n\t\tconst legend = `${chartYearRange[0]} - ${chartYearRange[1]}`;\n\t\treturn <div>\n\t\t\t{ renderHeader(legend, hasSummaryView) }\n\t\t\t<div><div style={{height: detailData.length*50+50}}><ResponsiveHeatMap\n\t\t\t\tdata={detailData}\n\t\t\t\tkeys={monthNames}\n\t\t\t\tindexBy=\"year\"\n\t\t\t\tcolors={[\"#edf8fb\",\"#ccece6\", \"#99d8c9\", \"#66c2a4\", \"#2ca25f\"]}\n\t\t\t\ttheme={{\n\t\t\t\t\tlabels: {text: {fontSize: \"14px\", fontWeight: \"bold\", fillOpacity : 1}},\n\t\t\t\t\tfontSize: \"14px\", fontWeight: \"bold\"\n\t\t\t\t}}\n\t\t\t\tmargin={{ top: 50, right: 60, bottom: 60, left: 60 }}\n\t\t\t\taxisLeft={{tickSize: 0, tickPadding: 10}}\n\t\t\t\taxisTop={{tickSize: 0, tickPadding: 10}}\n\t\t\t\tcellBorderColor={{ from: 'color', modifiers: [ [ 'darker', 0.4 ] ] }}\n\t\t\t\tlabelTextColor={{ from: 'color', modifiers: [ [ 'darker', 1.8 ] ] }}\n\t\t\t\thoverTarget=\"cell\"\n\t\t\t\tanimate={true}\n\t\t\t/></div></div>\n\t\t</div>\n\t}\n\n\tif (!chartYearRange) return null;\n\t\n\tif (summaryView === \"show\") {\n\t\tconst summaryData = buildYearGroups(data, chartYearRange);\n\t\treturn renderSummaryView(summaryData);\n\t} else {\n\t\tconst detailData = _.chain(data).filter( d => {\n\t\t\tconst year = getYear(d);\n\t\t\treturn  year >= chartYearRange[0] && year <= chartYearRange[1]\n\t\t})\n\t\t.reduce( (acc, d) => {\n\t\t\tconst [rawYear, rawMonth] = d.detailStratification.split(\"-\");\n\t\t\tconst month = monthNames[rawMonth-1];\n\t\t\tconst year = parseInt(rawYear);\n\t\t\tacc[year] = acc[year] || {year};\n\t\t\tacc[year][month] = (acc[year][month]||0) + d.count\n\t\t\treturn acc;\n\t\t}, {})\n\t\t.values().map( d => {\n\t\t\treturn _.assign(...monthNames.map(n => ({[n]: 0})), d)\n\t\t})\n\t\t.value();\n\t\treturn renderDetailView(detailData, summaryView === \"hide\")\n\t}\n\n}\n\nexport default DateHeatMap;","import React, { useEffect, useState } from \"react\";\nimport _ from \"lodash\";\nimport { Row, Col } from \"react-bootstrap\";\n\n\nfunction DatePrecision({detailData}) {\n\n\tconst [counts, setCounts] = useState();\n\n\tuseEffect( () => {\n\t\tconst precisions = [\"Y\", \"m\", \"d\", \"H\", \"M\", \"S\", \"f\", \"z\", \"z\", \"z\"];\n\t\tconst newCounts = _.reduce( detailData, (acc, d) => {\n\t\t\tconst precision = precisions.indexOf(d.detailStratification);\n\t\t\tif (precision === -1) return acc;\n\t\t\treturn {\n\t\t\t\tyear: (acc.year||0) + (precision >= 0 ? d.count : 0),\n\t\t\t\tmonth: (acc.month||0) + (precision >= 1 ? d.count : 0),\n\t\t\t\tday: (acc.day||0) + (precision >= 2 ? d.count : 0),\n\t\t\t\ttime: (acc.time||0) + (precision >= 3 ? d.count : 0),\n\t\t\t\ttimezone: (acc.timezone||0) + (precision >= 7 ? d.count : 0),\n\t\t\t}\n\t\t}, {})\n\t\tsetCounts(newCounts);\n\t}, [detailData]);\n\n\tif (!counts) return null;\n\t\n\tconst makePct = v => {\n\t\tconst pct = (v/counts.year)*100;\n\t\treturn pct < 1 ? \"< 1%\" : Math.round(pct)+\"%\";\n\t}\n\n\treturn <Row className=\"mb-4\"><Col>\n\t\t<div className=\"p-2 shadow-sm bg-white rounded\">\n\t\t\t<div className=\"mb-2 text-center text-secondary text-uppercase\">date precision</div>\t\t\t\t\t\n\t\t\t<div className=\"d-flex justify-content-center\">\n\t\t\t\t<div className=\"mr-4\">\n\t\t\t\t\t<h4 className=\"mb-0\" style={{color: \"#059669\", fontWeight: 700}}>\n\t\t\t\t\t\t{makePct(counts.year)}\n\t\t\t\t\t</h4>\n\t\t\t\t\t<div>year</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mr-4\">\n\t\t\t\t\t<h4 className=\"mb-0\" style={{color: \"#059669\", fontWeight: 700}}>\n\t\t\t\t\t\t{makePct(counts.month)}\n\t\t\t\t\t</h4>\n\t\t\t\t\t<div>month</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mr-4\">\n\t\t\t\t\t<h4 className=\"mb-0\" style={{color: \"#059669\", fontWeight: 700}}>\n\t\t\t\t\t\t{makePct(counts.day)}\n\t\t\t\t\t</h4>\n\t\t\t\t\t<div>day</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mr-4\">\n\t\t\t\t\t<h4 className=\"mb-0\" style={{color: \"#059669\", fontWeight: 700}}>\n\t\t\t\t\t\t{makePct(counts.time)}\n\t\t\t\t\t</h4>\n\t\t\t\t\t<div>time</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mr-4\">\n\t\t\t\t\t<h4 className=\"mb-0\" style={{color: \"#059669\", fontWeight: 700}}>\n\t\t\t\t\t\t{makePct(counts.timezone)}\n\t\t\t\t\t</h4>\n\t\t\t\t\t<div>timezone</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</Col></Row>\n\n}\n\nexport default DatePrecision;","import React, { useEffect, useState } from \"react\";\nimport _ from \"lodash\";\nimport { Row, Col } from \"react-bootstrap\";\n\n\nfunction ReferenceTargets({detailData}) {\n\n\tconst [totalCount, setTotalCount] = useState();\n\n\tuseEffect( () => {\n\t\tsetTotalCount( \n\t\t\tdetailData.filter( d => d.detailType === \"reference\")\n\t\t\t\t.reduce( (acc, d) => acc + d.count, 0)\n\t\t);\n\t}, [detailData]);\n\n\tif (!totalCount) return null;\n\n\tconst makePct = v => {\n\t\tconst pct = (v/totalCount)*100;\n\t\treturn pct < 1 ? \"< 1%\" : Math.round(pct)+\"%\";\n\t}\n\n\tdetailData = _.chain(detailData)\n\t\t.filter( d => d.detailType === \"reference\" )\n\t\t.sortBy(\"count\")\n\t\t.value();\n\n\treturn <Row className=\"mb-4\"><Col>\n\t\t<div className=\"p-2 shadow-sm bg-white rounded\">\n\t\t\t<div className=\"mb-2 text-center text-secondary text-uppercase\">reference targets</div>\t\t\t\t\t\n\t\t\t<table><tbody>\n\t\t\t\t{ detailData.map( r => <tr key={r.detailStratification}><td>{r.detailStratification}</td><td>{makePct(r.count)}</td></tr>)}\n\t\t\t</tbody></table>\t\t\t\n\t\t\t</div>\n\t</Col></Row>\n\n}\n\nexport default ReferenceTargets;","import React, { useEffect, useState } from \"react\";\nimport ElementMetrics from \"./ElementMetrics\";\nimport CodingTreeMap from \"./CodingTreeMap\";\nimport DateHeatMap from \"./DateHeatMap\";\nimport DatePrecision from \"./DatePrecision\";\nimport ReferenceTargets from \"./ReferenceTargets\";\n\nfunction ElementDetailPanel({detailData, currentElement}) {\n\n\tconst [elementDetailData, setElementDetailData] = useState();\n\t\n\tuseEffect( () => {\t\t\n\t\tsetElementDetailData( detailData.filter( d => {\n\t\t\treturn d.elementPath === currentElement.elementPath && \n\t\t\t\td.stratification === currentElement.stratification\n\t\t}))\n\t}, [detailData, currentElement])\n\n\tconst hasCodingDetail = elementDetailData &&\n\t\telementDetailData.find( d => d.detailType === \"coding\");\n\n\tconst hasDateDetail = elementDetailData &&\n\t\telementDetailData.find( d => d.detailType === \"date\");\n\n\tconst hasReferenceDetail = elementDetailData &&\n\t\telementDetailData.find( d => d.detailType === \"reference\");\n\n\tif (!elementDetailData || !currentElement) return <div></div>\n\t\n\treturn <div>\n\t\t<ElementMetrics \n\t\t\telement={currentElement}\n\t\t\tdetailData={elementDetailData}\n\t\t/>\n\t\t{currentElement && hasCodingDetail && \n\t\t\t<CodingTreeMap detailData={elementDetailData} />\n\t\t}\n\t\t{currentElement && hasDateDetail && <div>\n\t\t\t<DatePrecision detailData={elementDetailData} />\n\t\t\t<DateHeatMap data={elementDetailData} />\n\t\t</div>}\n\t\t{currentElement && hasReferenceDetail && <div>\n\t\t\t<ReferenceTargets detailData={elementDetailData} />\n\t\t</div>}\n\n\t</div>\n\n\n}\n\nexport default ElementDetailPanel;","import React, { useState } from \"react\";\n\nconst DropZone = ({ children, fileDropHandler }) => {\n\n\tconst [dragCounter, setDragCounter] = useState(0);\n\n\tconst isFileDrag = e => {\n\t\treturn !e.dataTransfer.types ||\n\t\t\te.dataTransfer.types[0] === \"Files\" ||\n\t\t\te.dataTransfer.types[0] === \"application/x-moz-file\";\n\t}\n\t\n\tconst handleDrop = e => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tif (e.dataTransfer.files && e.dataTransfer.files.length === 1)\n\t\t\tfileDropHandler(e.dataTransfer.files[0]);\n\t\t// e.dataTransfer.clearData();\n\t\tsetDragCounter(0);\n\t}\n\n\tconst handleDragOver = e => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\t\n\t}\n\n\tconst handleDragEnter = e => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tif (isFileDrag(e))\n\t\t\tsetDragCounter(dragCounter+1);\n\t}\n\n\tconst handleDragLeave = e => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tif (isFileDrag(e))\n\t\t\tsetDragCounter(dragCounter-1);\n\t}\n\n\tconst overlay = <div style={{\n\t\tborder: 'dashed grey 4px',\n\t\tbackgroundColor: 'rgba(255,255,255,.8)',\n\t\tposition: 'absolute',\n\t\ttop: 0,\n\t\tbottom: 0,\n\t\tleft: 0, \n\t\tright: 0,\n\t\tzIndex: 9999,\n\t}}></div>\n\n\treturn <div \n\t\tstyle={{position: \"relative\"}}\n\t\t\tonDragEnter={handleDragEnter}\n\t\t\tonDragOver={handleDragOver}\n\t\t\tonDragLeave={handleDragLeave}\n\t\t\tonDrop={handleDrop}\n\t\t>\n\t\t{ dragCounter > 0 && overlay }\n\t\t{ children }\n\t</div>\n\t\n} \n\nexport default DropZone;","import React, { useState, useRef, useEffect } from \"react\";\nimport DropZone from \"./DropZone\"\nimport { Button, Spinner, Alert } from \"react-bootstrap\";\nimport _ from \"lodash\";\n\nconst currentFileVersion = \"1.0.0\";\n\nfunction FileLoader(props) {\n\n\tconst [loading, setLoading] = useState();\n\tconst [errorMessage, setErrorMessage] = useState();\n\tconst fileInput = useRef();\n\n\tconst onFileLoaded = props.onFileLoaded;\n\n\tuseEffect( () => {\n\t\tconst dataUrl = getUrlParameter(\"data\");\n\t\tif (!dataUrl) return;\n\n\t\tsetLoading(true);\n\t\tsetErrorMessage(null);\n\n\t\tfetch(dataUrl)\n\t\t\t.then( response => {\n\t\t\t\tif (!response.ok)\n\t\t\t\t\tthrow new Error(`${dataUrl} - HTTP ${response.status} - ${response.statusText}`);\t\t\t\t\n\t\t\t\treturn response;\n\t\t\t})\n\t\t\t.then( data => data.text() )\n\t\t\t.then( data => {\n\t\t\t\ttry {\n\t\t\t\t\treturn JSON.parse(data);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new Error(`${dataUrl} is not a valid bulk data summary file`);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then( data => {\n\t\t\t\tconst [elements, detail] = readData(data)\n\t\t\t\tif (onFileLoaded) \n\t\t\t\t\tonFileLoaded(elements, detail);\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tsetErrorMessage(e.message);\n\t\t\t\tsetLoading(false);\n\t\t\t});\n\t}, [onFileLoaded])\n\n\tfunction getUrlParameter(name) {\n\t\tname = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n\t\tvar regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n\t\tvar results = regex.exec(window.location.search);\n\t\treturn results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n\t};\n\t\n\tconst handleSelectFile = e => {\n\t\te.preventDefault();\n\t\tfileInput.current.value = \"\";\n\t\tfileInput.current.click();\n\t}\n\n\tconst handleFileSelected = e => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tif (e.target.files.length === 1)\n\t\t\treadFile(e.target.files[0]);\n\t}\n\n\tconst readData = data => {\n\t\tconst shortenExtensionUrl = url => url.indexOf(\"/\") > -1 \n\t\t\t? \"...\" + url.match(/[^/]+(?=\\/$|$)/) \n\t\t\t: url;\n\n\t\tif (!data.summary || !data.detail || !_.isArray(data.summary) || !_.isArray(data.detail) || !data.version)\n\t\t\tthrow new Error(\"Invalid file format\");\n\t\tif (data.version !== currentFileVersion) throw new Error(`Version ${data.version} files are not supported`);\n\n\t\tlet summaryData = _.map(data.summary, el => {\n\n\t\t\tconst pathParts =  el.elementPath.split(/\\.(?![^[]*\\])/);\n\t\t\t\n\t\t\tconst isExtensionUrl = pathParts[pathParts.length-1] === \"url\" && \n\t\t\t\tpathParts[pathParts.length-2][0] === \"[\";\n\t\t\t\n\t\t\t//nest extension url under parent\n\t\t\tconst level = pathParts.length - (isExtensionUrl ? 3 : 2);\n\n\t\t\t//remove brackets from extensions and add ... prefix to truncated urls;\n\t\t\tconst display = isExtensionUrl\n\t\t\t\t? shortenExtensionUrl(pathParts[pathParts.length-2].replace(/\\[|\\]/g, \"\"))\n\t\t\t\t: pathParts[pathParts.length-1];\n\n\t\t\t//drop url element from extension url\n\t\t\tconst elementPath = isExtensionUrl\n\t\t\t\t? pathParts.slice(0, pathParts.length-1).join(\".\")\n\t\t\t\t: el.elementPath;\n\n\t\t\tconst parentPath = isExtensionUrl\n\t\t\t\t? pathParts.slice(0, pathParts.length-2).join(\".\")\n\t\t\t\t: pathParts.slice(0, pathParts.length-1).join(\".\");\n\n\t\t\t//push extensions to bottom\n\t\t\tlet position = el.position;\n\t\t\tif (el.fhirType ===  \"ModifierExtension\") position = 2000;\n\t\t\tif (el.fhirType === \"Extension\") position = 3000;\n\n\t\t\treturn {...el, parentPath, level, display, elementPath, position, rawPath: el.elementPath};\n\t\t});\n\n\t\t//interleave elements in hierarchy and add parent counts\n\t\tsummaryData = _.orderBy(summaryData, [\"level\", \"parentPath\", \"position\"], [\"asc\", \"asc\", \"desc\"]);\n\n\t\tlet orderedData = [];\n\t\tlet parentIndex;\n\t\t_.forEach(summaryData, (el,i) => {\n\t\t\tif (el.level === -1) return orderedData.unshift(el); //resource has no parent\n\t\t\tif (!parentIndex || el.parentPath !== summaryData[i-1].parentPath || el.stratification !== summaryData[i-1].stratification) {\n\t\t\t\tparentIndex = _.findIndex(orderedData, d => d.elementPath === el.parentPath && d.stratification === el.stratification);\n\t\t\t}\n\t\t\tconst parentCount = orderedData[parentIndex].instanceCount || orderedData[parentIndex].count || 0;\n\t\t\torderedData.splice(parentIndex+1, 0, {...el, parentCount});\n\t\t});\n\n\t\treturn [orderedData, data.detail];\n\n\t}\n\n\tconst readFile = file => {\n\t\tconst reader = new FileReader();\n\t\tsetLoading(true);\n\t\tsetErrorMessage(null);\n\n\t\treturn new Promise( (resolve, reject) => {\t\n\t\t\treader.onload = e => resolve(reader.result);\n\t\t\treader.onerror = e => reject(e);\n\t\t\treader.readAsText(file);\n\t\t})\n\t\t.then( data => {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(data);\n\t\t\t} catch (e) {\n\t\t\t\tthrow new Error(\"Error unable to parse file\")\n\t\t\t}\n\t\t})\n\t\t.then( data => {\n\t\t\tconst [elements, detail] = readData(data)\n\t\t\tif (props.onFileLoaded) \n\t\t\t\tprops.onFileLoaded(elements, detail);\n\t\t})\n\t\t.catch(e => {\n\t\t\tsetErrorMessage(e.message);\n\t\t\tsetLoading(false);\n\t\t});\n\t}\n\t\t\n\treturn <div className=\"text-center\">\n\t\t{ errorMessage && <Alert variant=\"danger\" className=\"m-2 p-2 text-left\">{errorMessage}</Alert> } \n\t\t{ loading && <Spinner animation=\"border\" role=\"status\" className=\"m-5\">\n\t\t\t<span className=\"sr-only\">Loading...</span>\n\t  \t</Spinner>}\n\t\t{ !loading && \n\t\t\t<DropZone fileDropHandler={readFile}>\n\t\t\t\t<div>\n\t\t\t\t\t<input ref={fileInput}\n\t\t\t\t\t\ttype=\"file\" \n\t\t\t\t\t\tstyle={{display: 'none'}}\n\t\t\t\t\t\tonChange={handleFileSelected}\n\t\t\t\t\t\taccept=\".json, application/json\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Button className=\"mt-5\" onClick={handleSelectFile}>Select File</Button>\n\t\t\t\t\t<div className=\"mt-2 pb-5\">or drop file here</div>\n\t\t\t\t</div>\n\t\t\t</DropZone>\n\t\t}\n\t</div>\n\t\n}\n\nexport default FileLoader;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M23.5,11.449c-6.385,0-11.563,4.959-11.563,11.077c0,7.265,5.045,9.117,5.045,13.344c0,1.045,0.799,2.017,1.999,2.731 c-0.251,0.209-0.391,0.438-0.391,0.678c0,0.322,0.253,0.623,0.688,0.881c-0.408,0.253-0.645,0.544-0.645,0.855 c0,0.314,0.242,0.608,0.659,0.863c-0.426,0.256-0.674,0.555-0.674,0.872c0,0.388,0.366,0.743,0.978,1.032 c-0.237,0.215-0.373,0.453-0.373,0.703c0,0.74,1.153,1.369,2.774,1.621C22.282,46.634,22.86,47,23.534,47 c0.673,0,1.25-0.363,1.535-0.889c1.637-0.248,2.803-0.881,2.803-1.623c0-0.247-0.131-0.482-0.363-0.694 c0.625-0.291,0.998-0.651,0.998-1.042c0-0.314-0.241-0.609-0.659-0.863c0.425-0.257,0.674-0.554,0.674-0.871 c0-0.322-0.254-0.623-0.688-0.882c0.41-0.252,0.646-0.544,0.646-0.855c0-0.249-0.151-0.484-0.421-0.698 c1.181-0.713,1.966-1.675,1.966-2.711c0-4.229,5.039-6.08,5.039-13.344C35.063,16.408,29.886,11.449,23.5,11.449z M29.538,29.381 c-1.152,1.692-2.455,3.604-2.535,6.232c-0.396,0.441-1.809,1.158-3.499,1.158c-1.691,0-3.105-0.717-3.5-1.16 c-0.08-2.629-1.385-4.541-2.539-6.232c-1.287-1.886-2.502-3.667-2.502-6.854c0-4.439,3.83-8.051,8.537-8.051 c4.708,0,8.538,3.612,8.538,8.051C32.038,25.713,30.823,27.495,29.538,29.381z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M23.5,7.564c0.832,0,1.513-0.9,1.513-2V2c0-1.1-0.681-2-1.513-2s-1.513,0.9-1.513,2v3.564 C21.987,6.665,22.668,7.564,23.5,7.564z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.747,9.642c0.721-0.416,0.859-1.536,0.31-2.488l-1.781-3.087c-0.55-0.953-1.59-1.392-2.311-0.976 c-0.721,0.416-0.86,1.536-0.311,2.488l1.783,3.087C13.987,9.619,15.026,10.058,15.747,9.642z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.095,13.007L6.01,11.225c-0.953-0.55-2.073-0.411-2.489,0.31c-0.416,0.721,0.022,1.76,0.976,2.31l3.086,1.782 c0.953,0.55,2.073,0.411,2.488-0.31C10.486,14.596,10.048,13.557,9.095,13.007z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M42.504,32.295l-3.086-1.781c-0.953-0.551-2.073-0.412-2.488,0.31c-0.416,0.721,0.021,1.76,0.977,2.31l3.084,1.782 c0.953,0.55,2.073,0.411,2.489-0.31C43.896,33.884,43.458,32.845,42.504,32.295z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.994,23.07c0-0.833-0.9-1.513-2-1.513H2.43c-1.1,0-2,0.681-2,1.513c0,0.832,0.9,1.513,2,1.513h3.564 C7.094,24.583,7.994,23.902,7.994,23.07z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M44.57,21.557h-3.563c-1.101,0-2,0.681-2,1.513c0,0.832,0.899,1.513,2,1.513h3.563c1.101,0,2-0.681,2-1.513 C46.57,22.238,45.67,21.557,44.57,21.557z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.582,30.514l-3.086,1.781c-0.953,0.55-1.392,1.589-0.976,2.311c0.416,0.721,1.536,0.859,2.489,0.31l3.085-1.782 c0.953-0.55,1.392-1.589,0.976-2.31C9.655,30.104,8.535,29.963,7.582,30.514z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M39.418,15.627l3.086-1.782c0.953-0.55,1.392-1.589,0.976-2.31c-0.416-0.721-1.536-0.86-2.489-0.31l-3.085,1.782 c-0.952,0.55-1.392,1.589-0.976,2.31C37.345,16.038,38.465,16.177,39.418,15.627z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M35.036,3.09c-0.722-0.416-1.762,0.023-2.312,0.976l-1.781,3.087c-0.55,0.953-0.411,2.072,0.31,2.488 c0.722,0.416,1.761-0.023,2.311-0.976l1.783-3.087C35.896,4.626,35.756,3.506,35.036,3.09z\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nfunction SvgBulb(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"47px\",\n    height: \"47px\",\n    viewBox: \"0 0 47 47\",\n    style: {\n      enableBackground: \"new 0 0 47 47\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBulb);\nexport default __webpack_public_path__ + \"static/media/bulb.e1d09e95.svg\";\nexport { ForwardRef as ReactComponent };","import './App.css';\nimport React, {useState} from \"react\";\nimport _ from \"lodash\";\nimport ElementPanel from './ElementPanel';\nimport ElementDetailPanel from \"./ElementDetailPanel\";\nimport FileLoader from \"./FileLoader\";\nimport { ReactComponent as Logo } from './bulb.svg';\n\nfunction App() {\n\n\tconst [elementsList, setElementsList] = useState();\n\tconst [elementsDetail, setElementsDetail] = useState();\n\tconst [currentElement, setCurrentElement] = useState();\n\tconst [currentResourceCategory, setCurrentResourceCategory] = useState();\n\n\tconst handleFileLoaded = (elements, detail) => {\n\t\t\tsetElementsList(elements);\n\t\t\tsetElementsDetail(detail);\n\t\t\tconst categories = _.chain(elements)\n\t\t\t\t.filter( item => {\n\t\t\t\t\treturn item.elementPath === item.resourceType;\n\t\t\t\t}).value();\n\t\t\tif (categories.length === 1) \n\t\t\t\tsetCurrentResourceCategory(categories[0])\n\t}\n\n\treturn <div className=\"h-100 d-flex flex-column\">\n\n\t\t<div className=\"flex-shrink-0 py-3 px-4 text-white\" style={{background: \"#059669\"}}>\n\t\t\t<div className=\"d-flex align-items-center\">\n\t\t\t\t<Logo style={{fill: \"white\", height: \"1.8em\"}} className=\"mr-2\" />\n\t\t\t\t<h4 className=\"mb-0\">FHIR DATA CENSUS</h4>\n\t\t\t</div>\n\t\t</div>\n\n\t\t{ !elementsList && <FileLoader onFileLoaded={handleFileLoaded} />}\n\n\n\t\t{ elementsList && \n\n\t\t\t<div className=\"flex-grow-1 d-flex \" style={{height: \"1px\"}}>\n\n\t\t\t\t<div className=\"p-4 flex-shrink-0\" style={{overflowY: \"auto\"}}>\n\t\t\t\t\t<ElementPanel\n\t\t\t\t\t\telementsList={elementsList}\n\t\t\t\t\t\tcurrentResourceCategory={currentResourceCategory}\n\t\t\t\t\t\tonCurrentElementChange={setCurrentElement}\n\t\t\t\t\t\tonCurrentResourceCategoryChange={setCurrentResourceCategory}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{currentElement && <div className=\"p-4 flex-grow-1 bg-light\" style={{overflowY: \"auto\", borderLeft: \"1px solid #dadce0\"}}>\n\t\t\t\t\t<ElementDetailPanel \n\t\t\t\t\t\tcurrentElement={currentElement}\n\t\t\t\t\t\tdetailData={elementsDetail}\n\t\t\t\t\t/>\n\t\t\t\t</div>}\n\n\t\t\t</div>\n\n\t\t}\n\n\t</div>\n\t\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from \"./App\"\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}